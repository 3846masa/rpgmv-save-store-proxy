'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _express = require('express');

var _passport = require('passport');

var _passport2 = _interopRequireDefault(_passport);

var _passportHttp = require('passport-http');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const USERNAME = process.env.USERNAME || 'user';
const PASSWORD = process.env.PASSWORD || 'password';

_passport2.default.use(new _passportHttp.DigestStrategy({ qop: '認証 Authenticate' }, authenticate, (params, done) => done(null, true)));

function authenticate(username, done) {
  if (username !== USERNAME) done(null, false);else done(null, username, PASSWORD);
}

let router = (0, _express.Router)();
router.use(_passport2.default.initialize());
router.use(_passport2.default.session());
router.use(_passport2.default.authenticate('digest', { session: false }));

exports.default = router;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXNzcG9ydC1yb3V0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUlBLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxJQUFJLE1BQU0sQ0FBQztBQUNoRCxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsSUFBSSxVQUFVLENBQUM7O0FBRXBELG1CQUFTLEdBQUcsQ0FBQyxrQkFMSixjQUFjLENBTXJCLEVBQUUsR0FBRyxFQUFFLGlCQUFpQixFQUFFLEVBQzFCLFlBQVksRUFDWixDQUFDLE1BQU0sRUFBRSxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FDbkMsQ0FBQyxDQUFDOztBQUVILFNBQVMsWUFBWSxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUU7QUFDcEMsTUFBSSxRQUFRLEtBQUssUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsS0FDeEMsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7Q0FDckM7O0FBRUQsSUFBSSxNQUFNLEdBQUcsYUFsQkosTUFBTSxHQWtCTSxDQUFDO0FBQ3RCLE1BQU0sQ0FBQyxHQUFHLENBQUMsbUJBQVMsVUFBVSxFQUFFLENBQUMsQ0FBQztBQUNsQyxNQUFNLENBQUMsR0FBRyxDQUFDLG1CQUFTLE9BQU8sRUFBRSxDQUFDLENBQUM7QUFDL0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxtQkFBUyxZQUFZLENBQUMsUUFBUSxFQUFFLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQzs7a0JBRWpELE1BQU0iLCJmaWxlIjoicGFzc3BvcnQtcm91dGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgcGFzc3BvcnQgZnJvbSAncGFzc3BvcnQnO1xuaW1wb3J0IHsgRGlnZXN0U3RyYXRlZ3kgfSBmcm9tICdwYXNzcG9ydC1odHRwJztcblxuY29uc3QgVVNFUk5BTUUgPSBwcm9jZXNzLmVudi5VU0VSTkFNRSB8fCAndXNlcic7XG5jb25zdCBQQVNTV09SRCA9IHByb2Nlc3MuZW52LlBBU1NXT1JEIHx8ICdwYXNzd29yZCc7XG5cbnBhc3Nwb3J0LnVzZShuZXcgRGlnZXN0U3RyYXRlZ3koXG4gIHsgcW9wOiAn6KqN6Ki8IEF1dGhlbnRpY2F0ZScgfSxcbiAgYXV0aGVudGljYXRlLFxuICAocGFyYW1zLCBkb25lKSA9PiBkb25lKG51bGwsIHRydWUpXG4pKTtcblxuZnVuY3Rpb24gYXV0aGVudGljYXRlKHVzZXJuYW1lLCBkb25lKSB7XG4gIGlmICh1c2VybmFtZSAhPT0gVVNFUk5BTUUpIGRvbmUobnVsbCwgZmFsc2UpO1xuICBlbHNlIGRvbmUobnVsbCwgdXNlcm5hbWUsIFBBU1NXT1JEKTtcbn1cblxubGV0IHJvdXRlciA9IFJvdXRlcigpO1xucm91dGVyLnVzZShwYXNzcG9ydC5pbml0aWFsaXplKCkpO1xucm91dGVyLnVzZShwYXNzcG9ydC5zZXNzaW9uKCkpO1xucm91dGVyLnVzZShwYXNzcG9ydC5hdXRoZW50aWNhdGUoJ2RpZ2VzdCcsIHsgc2Vzc2lvbjogZmFsc2UgfSkpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXX0=